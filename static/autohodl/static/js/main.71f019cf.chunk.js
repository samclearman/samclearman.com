(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{38:function(f){f.exports=JSON.parse('{"_format":"hh-sol-artifact-1","contractName":"Autohodl","sourceName":"contracts/autohodl.sol","abi":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"address","name":"hodler","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"hodler","type":"address"},{"internalType":"uint256","name":"lockSeconds","type":"uint256"}],"name":"hodl","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"hodler","type":"address"}],"name":"lockedUntilOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"}],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}],"bytecode":"0x608060405234801561001057600080fd5b506106a3806100206000396000f3fe60806040526004361061003f5760003560e01c806339b705481461004457806351cff8d91461006057806370a0823114610089578063cc9e7436146100c6575b600080fd5b61005e6004803603810190610059919061046d565b610103565b005b34801561006c57600080fd5b5061008760048036038101906100829190610444565b6101e2565b005b34801561009557600080fd5b506100b060048036038101906100ab9190610444565b61032e565b6040516100bd9190610547565b60405180910390f35b3480156100d257600080fd5b506100ed60048036038101906100e89190610444565b610376565b6040516100fa9190610547565b60405180910390f35b804261010f919061057e565b600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550346000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205461019c919061057e565b6000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505050565b6101eb816103bf565b156101f55761032b565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905060008060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190555060008273ffffffffffffffffffffffffffffffffffffffff16826040516102a290610512565b60006040518083038185875af1925050503d80600081146102df576040519150601f19603f3d011682016040523d82523d6000602084013e6102e4565b606091505b5050905080610328576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161031f90610527565b60405180910390fd5b50505b50565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b6000600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b6000600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205442116104105760019050610415565b600090505b919050565b6000813590506104298161063f565b92915050565b60008135905061043e81610656565b92915050565b60006020828403121561045657600080fd5b60006104648482850161041a565b91505092915050565b6000806040838503121561048057600080fd5b600061048e8582860161041a565b925050602061049f8582860161042f565b9150509250929050565b60006104b6600083610562565b9150600082019050919050565b60006104d060108361056d565b91507f5472616e73666572206661696c65642e000000000000000000000000000000006000830152602082019050919050565b61050c81610606565b82525050565b600061051d826104a9565b9150819050919050565b60006020820190508181036000830152610540816104c3565b9050919050565b600060208201905061055c6000830184610503565b92915050565b600081905092915050565b600082825260208201905092915050565b600061058982610606565b915061059483610606565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff038211156105c9576105c8610610565b5b828201905092915050565b60006105df826105e6565b9050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b610648816105d4565b811461065357600080fd5b50565b61065f81610606565b811461066a57600080fd5b5056fea2646970667358221220964c96e4eb92cee0e775d8a4acdddf80089dd51926e0bdf3106b75d28d4e1f8164736f6c63430008000033","deployedBytecode":"0x60806040526004361061003f5760003560e01c806339b705481461004457806351cff8d91461006057806370a0823114610089578063cc9e7436146100c6575b600080fd5b61005e6004803603810190610059919061046d565b610103565b005b34801561006c57600080fd5b5061008760048036038101906100829190610444565b6101e2565b005b34801561009557600080fd5b506100b060048036038101906100ab9190610444565b61032e565b6040516100bd9190610547565b60405180910390f35b3480156100d257600080fd5b506100ed60048036038101906100e89190610444565b610376565b6040516100fa9190610547565b60405180910390f35b804261010f919061057e565b600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550346000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205461019c919061057e565b6000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505050565b6101eb816103bf565b156101f55761032b565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905060008060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190555060008273ffffffffffffffffffffffffffffffffffffffff16826040516102a290610512565b60006040518083038185875af1925050503d80600081146102df576040519150601f19603f3d011682016040523d82523d6000602084013e6102e4565b606091505b5050905080610328576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161031f90610527565b60405180910390fd5b50505b50565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b6000600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b6000600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205442116104105760019050610415565b600090505b919050565b6000813590506104298161063f565b92915050565b60008135905061043e81610656565b92915050565b60006020828403121561045657600080fd5b60006104648482850161041a565b91505092915050565b6000806040838503121561048057600080fd5b600061048e8582860161041a565b925050602061049f8582860161042f565b9150509250929050565b60006104b6600083610562565b9150600082019050919050565b60006104d060108361056d565b91507f5472616e73666572206661696c65642e000000000000000000000000000000006000830152602082019050919050565b61050c81610606565b82525050565b600061051d826104a9565b9150819050919050565b60006020820190508181036000830152610540816104c3565b9050919050565b600060208201905061055c6000830184610503565b92915050565b600081905092915050565b600082825260208201905092915050565b600061058982610606565b915061059483610606565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff038211156105c9576105c8610610565b5b828201905092915050565b60006105df826105e6565b9050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b610648816105d4565b811461065357600080fd5b50565b61065f81610606565b811461066a57600080fd5b5056fea2646970667358221220964c96e4eb92cee0e775d8a4acdddf80089dd51926e0bdf3106b75d28d4e1f8164736f6c63430008000033","linkReferences":{},"deployedLinkReferences":{}}')},39:function(f){f.exports=JSON.parse('{"hardhat":{"Autohodl":"0x5fbdb2315678afecb367f032d93f642f64180aa3"},"ropsten":{"Autohodl":"0x212BC7f3D2B9C0f17d87F75D3DD62a93A7337EcB"}}')},46:function(f,e,t){f.exports=t(65)},52:function(f,e){},61:function(f,e){},65:function(f,e,t){"use strict";t.r(e);var a=t(5),n=t.n(a),r=t(37),s=t.n(r),i=t(2),l=t.n(i),c=t(26),o=t(16),d=t(3),u=t(4),b=t(7),m=t(6),h=t(23),p=t(38),v=t(39);function E(){return n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row justify-content-md-center"},n.a.createElement("div",{className:"col-6 p-4 text-center"},n.a.createElement("p",null,"No Ethereum wallet was detected. ",n.a.createElement("br",null),"Please install"," ",n.a.createElement("a",{href:"http://metamask.io",target:"_blank",rel:"noopener noreferrer"},"MetaMask"),"."))))}function y(f){var e=f.message,t=f.dismiss;return n.a.createElement("div",{className:"alert alert-danger",role:"alert"},e,n.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:t},n.a.createElement("span",{"aria-hidden":"true"},"\xd7")))}function w(f){var e=f.connectWallet,t=f.networkError,a=f.dismiss;return n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row justify-content-md-center"},n.a.createElement("div",{className:"col-12 text-center"},t&&n.a.createElement(y,{message:t,dismiss:a})),n.a.createElement("div",{className:"col-6 p-4 text-center"},n.a.createElement("p",null,"Please connect to your wallet."),n.a.createElement("button",{className:"btn btn-warning",type:"button",onClick:e},"Connect Wallet"))))}function k(){return n.a.createElement("div",{style:{position:"fixed",zIndex:2,top:0,left:0,width:"100%",height:"100%",background:"rgba(255, 255, 255, 0.5)"}},n.a.createElement("div",{style:{position:"absolute",zIndex:3,top:"50%",left:"50%",width:"100px",height:"50px",marginLeft:"-50px",marginTop:" -25px",textAlign:"center"}},n.a.createElement("div",{className:"spinner-border",role:"status"},n.a.createElement("span",{className:"sr-only"},"Loading..."))))}var g=t(28);function _(f){var e,t=f.lockTokens;return n.a.createElement("div",null,n.a.createElement("h4",null,"Hodl"),n.a.createElement("form",{onSubmit:function(f){f.preventDefault();var e=new FormData(f.target),a=parseFloat(e.get("amount")),n=60*parseFloat(e.get("lockDays"))*60*24;a&&n&&t(a,n)}},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Amount of eth"),n.a.createElement("input",(e={className:"form-control",type:"number",step:"1",name:"amount",placeholder:"420.69"},Object(g.a)(e,"step","any"),Object(g.a)(e,"required",!0),e))),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Days to lock for"),n.a.createElement("input",{className:"form-control",type:"number",name:"lockDays",placeholder:"1",required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{className:"btn btn-primary",type:"submit",value:"Hodl"}))))}function x(f){var e=f.withdrawTokens,t=f.disabled;return n.a.createElement("div",null,n.a.createElement("h6",null,"Use this button to withdraw your eth (once the lock has expired)"),n.a.createElement("form",{onSubmit:function(f){f.preventDefault(),e()}},n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{className:"btn btn-primary",type:"submit",value:"Withdraw",disabled:t}))))}function N(f){var e=f.message,t=f.dismiss;return n.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Error sending transaction: ",e.substring(0,100),n.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:t},n.a.createElement("span",{"aria-hidden":"true"},"\xd7")))}function S(f){var e=f.txHash;return n.a.createElement("div",{className:"alert alert-info",role:"alert"},"Waiting for transaction ",n.a.createElement("strong",null,e)," to be mined")}function D(f){f.selectedAddress;return n.a.createElement(n.a.Fragment,null,n.a.createElement("p",null,"You don't have anything to hodl!"))}var T=v.ropsten,O=function(f){Object(b.a)(t,f);var e=Object(m.a)(t);function t(f){var a;return Object(d.a)(this,t),(a=e.call(this,f)).initialState={tokenData:void 0,selectedAddress:void 0,balance:void 0,txBeingSent:void 0,transactionError:void 0,networkError:void 0},a.state=a.initialState,a}return Object(u.a)(t,[{key:"render",value:function(){var f=this;return void 0===window.ethereum?n.a.createElement(E,null):this.state.selectedAddress?this.state.balance?n.a.createElement("div",{className:"container p-4"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12"},n.a.createElement("h1",null,"Autohodl"),n.a.createElement("p",null,"Welcome ",n.a.createElement("b",null,this.state.selectedAddress),", you have"," ",n.a.createElement("b",null,h.a.utils.formatEther(this.state.balance)," eth locked "),this.state.balance>0&&n.a.createElement(n.a.Fragment,null,"until"," ",n.a.createElement("b",null,new Date(1e3*this.state.lockedUntil.toNumber()).toLocaleDateString()),".")))),n.a.createElement("hr",null),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12"},this.state.txBeingSent&&n.a.createElement(S,{txHash:this.state.txBeingSent}),this.state.transactionError&&n.a.createElement(N,{message:this._getRpcErrorMessage(this.state.transactionError),dismiss:function(){return f._dismissTransactionError()}}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12"},this.state.availableEth.eq(0)&&n.a.createElement(D,{selectedAddress:this.state.selectedAddress}),this.state.availableEth.gt(0)&&n.a.createElement(_,{lockTokens:function(e,t){return f._hodlTokens(e,t)}}),this.state.balance.gt(0)&&n.a.createElement(n.a.Fragment,null,n.a.createElement("hr",null),n.a.createElement(x,{withdrawTokens:function(){return f._withdrawTokens()},disabled:1e3*this.state.lockedUntil.toNumber()>Date.now()}))))):n.a.createElement(k,null):n.a.createElement(w,{connectWallet:function(){return f._connectWallet()},networkError:this.state.networkError,dismiss:function(){return f._dismissNetworkError()}})}},{key:"componentWillUnmount",value:function(){this._stopPollingData()}},{key:"_connectWallet",value:function(){var f=Object(o.a)(l.a.mark((function f(){var e,t,a,n=this;return l.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,window.ethereum.enable();case 2:if(e=f.sent,t=Object(c.a)(e,1),a=t[0],this._checkNetwork()){f.next=7;break}return f.abrupt("return");case 7:this._initialize(a),window.ethereum.on("accountsChanged",(function(f){var e=Object(c.a)(f,1)[0];if(n._stopPollingData(),void 0===e)return n._resetState();n._initialize(e)})),window.ethereum.on("networkChanged",(function(f){Object(c.a)(f,1)[0];n._stopPollingData(),n._resetState()}));case 10:case"end":return f.stop()}}),f,this)})));return function(){return f.apply(this,arguments)}}()},{key:"_initialize",value:function(f){this.setState({selectedAddress:f}),this._intializeEthers(),this._startPollingData()}},{key:"_intializeEthers",value:function(){var f=Object(o.a)(l.a.mark((function f(){return l.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:this._provider=new h.a.providers.Web3Provider(window.ethereum),this._autohodl=new h.a.Contract(T.Autohodl,p.abi,this._provider.getSigner(0));case 2:case"end":return f.stop()}}),f,this)})));return function(){return f.apply(this,arguments)}}()},{key:"_startPollingData",value:function(){var f=this;this._pollDataInterval=setInterval((function(){return f._updateBalance()}),1e3),this._updateBalance()}},{key:"_stopPollingData",value:function(){clearInterval(this._pollDataInterval),this._pollDataInterval=void 0}},{key:"_updateBalance",value:function(){var f=Object(o.a)(l.a.mark((function f(){var e,t,a;return l.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this._provider.getBalance(this.state.selectedAddress);case 2:return e=f.sent,f.next=5,this._autohodl.balanceOf(this.state.selectedAddress);case 5:return t=f.sent,f.next=8,this._autohodl.lockedUntilOf(this.state.selectedAddress);case 8:a=f.sent,this.setState({availableEth:e,balance:t,lockedUntil:a});case 10:case"end":return f.stop()}}),f,this)})));return function(){return f.apply(this,arguments)}}()},{key:"_hodlTokens",value:function(){var f=Object(o.a)(l.a.mark((function f(e,t){var a=this;return l.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this._sendTransaction((function(){return a._autohodl.hodl(a.state.selectedAddress,t,{value:h.a.utils.parseUnits(e.toString())})}));case 2:case"end":return f.stop()}}),f,this)})));return function(e,t){return f.apply(this,arguments)}}()},{key:"_withdrawTokens",value:function(){var f=Object(o.a)(l.a.mark((function f(){var e=this;return l.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this._sendTransaction((function(){return e._autohodl.withdraw(e.state.selectedAddress)}));case 2:case"end":return f.stop()}}),f,this)})));return function(){return f.apply(this,arguments)}}()},{key:"_sendTransaction",value:function(){var f=Object(o.a)(l.a.mark((function f(e){var t;return l.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return f.prev=0,this._dismissTransactionError(),f.next=4,e();case 4:return t=f.sent,this.setState({txBeingSent:t.hash}),f.next=8,t.wait();case 8:if(0!==f.sent.status){f.next=11;break}throw new Error("Transaction failed");case 11:return f.next=13,this._updateBalance();case 13:f.next=19;break;case 15:f.prev=15,f.t0=f.catch(0),console.error(f.t0),this.setState({transactionError:f.t0});case 19:return f.prev=19,this.setState({txBeingSent:void 0}),f.finish(19);case 22:case"end":return f.stop()}}),f,this,[[0,15,19,22]])})));return function(e){return f.apply(this,arguments)}}()},{key:"_dismissTransactionError",value:function(){this.setState({transactionError:void 0})}},{key:"_dismissNetworkError",value:function(){this.setState({networkError:void 0})}},{key:"_getRpcErrorMessage",value:function(f){return f.data?f.data.message:f.message}},{key:"_resetState",value:function(){this.setState(this.initialState)}},{key:"_checkNetwork",value:function(){return"3"===window.ethereum.networkVersion||(this.setState({networkError:"Please connect to ".concat("ropsten")}),!1)}}]),t}(n.a.Component);t(64);s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(O,null)),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.71f019cf.chunk.js.map